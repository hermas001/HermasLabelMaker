<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hermas Label Generator</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='Project-Hermas-Top-logo.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='output.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+Malayalam:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-background text-foreground font-sans antialiased">
    <div class="min-h-screen flex flex-col">
        <header class="text-center py-8">
            <img src="{{ url_for('static', filename='Project-Hermas-logo.svg') }}" alt="Logo"
                 class="mx-auto mb-4 w-56 h-auto relative"
                 style="position: relative; left: -15px; top: 13px;" />
            <h1 class="text-3xl font-bold" style="color:#00B1B8;">LABEL GENERATOR</h1>
        </header>

        <main class="flex-grow container mx-auto px-4 py-8 max-w-4xl">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Form section -->
                <div class="lg:w-[58%] xl:w-3/5">
                    <div class="bg-card text-card-foreground rounded-lg border shadow-sm p-6">
                        <div class="flex flex-col space-y-1.5 pb-3 mb-3 border-b">
                            <h3 class="text-lg font-semibold leading-none tracking-tight text-primary uppercase">ENTER LABEL DETAILS</h3>
                        </div>
                        <form id="labelForm" class="space-y-5">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5">
                                <div>
                                    <label for="productName" class="block text-sm font-medium text-foreground/90 mb-1">Product Name:</label>
                                    <input type="text" id="productName" name="productName" maxlength="17" required class="flex h-10 w-full rounded-md border border-border bg-input px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2" placeholder="ഉത്പന്നത്തിൻ്റെ പേര്">
                                </div>
                                <div>
                                    <label for="batchNumber" class="block text-sm font-medium text-foreground/90 mb-1">Batch Number:</label>
                                    <input type="text" id="batchNumber" name="batchNumber" maxlength="5" required class="flex h-10 w-full rounded-md border border-border bg-input px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2" placeholder="ബാച്ച് നമ്പർ">
                                </div>
                                <div>
                                    <label for="quantityInBox" class="block text-sm font-medium text-foreground/90 mb-1">Quantity in Box:</label>
                                    <input type="text" id="quantityInBox" name="quantityInBox" maxlength="8" required class="flex h-10 w-full rounded-md border border-border bg-input px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2" placeholder="ബോക്സിലെ അളവ്">
                                </div>
                                <div>
                                    <label for="weightVolumeValue" class="block text-sm font-medium text-foreground/90 mb-1">Weight/Volume:</label>
                                    <div class="flex gap-2">
                                        <input type="number" id="weightVolumeValue" name="weightVolumeValue" min="0" max="999" maxlength="3" required class="flex h-10 w-2/3 rounded-md border border-border bg-input px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2" placeholder="അളവ്">
                                        <select id="weightVolumeUnit" name="weightVolumeUnit" required class="flex h-10 w-1/3 rounded-md border border-border bg-input px-2 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
                                            <option value="KG">KG</option>
                                            <option value="GM">GM</option>
                                            <option value="ML">ML</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label for="mfgDate" class="block text-sm font-medium text-foreground/90 mb-1">Manufacture Date:</label>
                                    <input type="text" id="mfgDate" name="mfgDate" maxlength="11" required class="flex h-10 w-full rounded-md border border-border bg-input px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2" placeholder="നിർമ്മാണ തീയതി">
                                </div>
                                <div>
                                    <label for="numberOfStickers" class="block text-sm font-medium text-foreground/90 mb-1">Number of Stickers:</label>
                                    <input type="number" id="numberOfStickers" name="numberOfStickers" required min="1" class="flex h-10 w-full rounded-md border border-border bg-input px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2" placeholder="സ്റ്റിക്കറുകളുടെ എണ്ണം" value="">
                                </div>
                            </div>
                            <div class="pt-4 flex flex-col items-center gap-3">
                                <div class="pt-4 flex justify-center">
                                    <button type="button" id="addToQueueButton"
                                        class="inline-flex items-center justify-center gap-2 rounded border border-border bg-white text-foreground font-medium text-sm shadow-sm hover:bg-gray-100 transition h-9 px-4 py-2 w-full md:w-auto"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                        <span>Add to PDF Array</span>
                                    </button>
                                </div>
                                <button type="button" id="clearFormButton"
                                    class="inline-flex items-center justify-center gap-2 rounded border border-border bg-white text-destructive font-medium text-sm shadow-sm hover:bg-red-50 transition h-9 px-4 py-2 w-full md:w-auto mt-1"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                    <span>Clear All</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Queue section -->
                <div class="lg:w-[42%] xl:w-2/5">
                    <div class="bg-card text-card-foreground rounded-lg border shadow-sm h-full flex flex-col p-6">
                        <div class="flex flex-col space-y-1.5 pb-3 mb-3 border-b">
                           <h3 class="text-lg font-semibold leading-none tracking-tight text-primary uppercase">STICKER ARRAY</h3>
                        </div>
                        <div class="text-sm text-muted-foreground pt-1 pb-3 space-y-1">
                            <p><strong class="text-black">Sticker Loaded:</strong> <span id="queueStatus" class="font-medium text-foreground">0 / 21</span></p>
                        </div>
                        <div class="flex-grow overflow-hidden">
                            <div id="labelQueueList" class="h-[300px] overflow-y-auto pr-3 space-y-3">
                                <p class="empty-queue-message text-muted-foreground text-center py-10">Array is empty. Add labels using the form.</p>
                                <!-- Queued labels will be dynamically inserted here -->
                            </div>
                        </div>
                        <div class="pt-4 mt-4 border-t flex justify-center">
                            <button type="button" id="generateAllButton"
                                class="inline-flex items-center justify-center gap-2 rounded border border-border bg-white text-foreground font-medium text-sm shadow-sm hover:bg-gray-100 transition h-9 px-4 py-2 w-full md:w-auto"
                                disabled
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                                <span>Generate All Labels PDF</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="w-full text-center py-8 mt-10 border-t border-border">
            <p class="text-sm text-muted-foreground">
                Hermas Label Generator developed by TM Hermas
            </p>
        </footer>
    </div>

    <!-- Modal -->
    <div id="notificationModal" class="fixed inset-0 bg-gray-800/75 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300 ease-in-out">
        <div class="bg-card p-6 rounded-lg shadow-xl max-w-sm w-full transform transition-all duration-300 ease-in-out scale-95 opacity-0" id="modalContentContainer">
            <h3 id="modalTitle" class="text-lg font-semibold mb-2 text-card-foreground">Notification</h3>
            <p id="modalMessage" class="text-sm text-muted-foreground mb-4"></p>
            <button id="modalCloseButton" class="w-full bg-primary hover:bg-primary/90 text-primary-foreground font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out">
                OK
            </button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>

